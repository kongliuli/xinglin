# 授权与版本控制策略

## 授权机制
- 软件首次运行时，读取硬件信息生成唯一机器码（经哈希处理）。
- 用户输入激活码后，WPF 将机器码 + 激活码发送至主控服务。
- 主控服务验证激活码有效性，绑定机器码，并返回初始配置（模板版本、权限、过期时间）。

## 心跳与校验
- 每次 WPF 启动时，自动向主控服务发送心跳包（含机器码、当前模板版本）。
- 主控服务检查：是否过期、是否被禁用、模板是否需强制更新。
- 若授权失效，WPF 锁定核心功能（仅保留查看历史报告）。

## 模板管理
- 所有模板由主控服务集中管理，按版本号发布。
- 支持为不同医院分配不同模板。
- 可设置模板为“强制更新”，客户端版本低于服务端时无法使用。

## 权限控制
- 权限以 JSON 形式下发（如 `{"Print":true, "ExportPDF":false}`）。
- WPF 根据权限动态显示或隐藏功能按钮，实现精细化控制。
