<UserControl x:Class="Demo_ReportPrinter.Views.TemplateTreePanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:Demo_ReportPrinter.ViewModels"
             xmlns:services="clr-namespace:Demo_ReportPrinter.Services.Shared">
    <UserControl.DataContext>
        <viewModels:TemplateTreeViewModel/>
    </UserControl.DataContext>

    <Grid>
        <StackPanel>
            <TextBlock Text="模板管理" FontWeight="Bold" Margin="0,0,0,10"/>

            <!-- 搜索框 -->
            <TextBox Text="{Binding SearchText, Mode=TwoWay}" ToolTip="搜索模板..." Margin="0,0,0,5"/>

            <!-- 分类选择 -->
            <ComboBox ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory, Mode=TwoWay}" Margin="0,0,0,10"/>

            <!-- 模板树 -->
            <TreeView ItemsSource="{Binding RootNode.Children}" SelectedItemChanged="TreeView_SelectedItemChanged" Height="200">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                        <TextBlock Text="{Binding Name}"/>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>

            <!-- 操作按钮 -->
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                <Button Content="刷新" Command="{Binding RefreshTemplatesCommand}" Width="50" Margin="0,0,5,0"/>
                <Button Content="新建" Command="{Binding CreateNewTemplateCommand}" Width="50"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>